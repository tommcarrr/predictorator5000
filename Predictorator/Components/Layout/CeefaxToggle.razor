@implements IDisposable
@rendermode InteractiveServer
@inject ThemeService ThemeService
@using MudBlazor

<MudIconButton Icon="@Icons.Material.Outlined.Article" OnClick="ToggleCeefax" UserAttributes="@(new Dictionary<string, object>{{"id","ceefaxToggle"}})" />

@code {
    protected override void OnInitialized()
    {
        ThemeService.OnChange += OnThemeChanged;
    }

    private async Task ToggleCeefax()
    {
        await ThemeService.ToggleCeefaxAsync();
    }

    private void OnThemeChanged() => InvokeAsync(StateHasChanged);

    public void Dispose()
    {
        ThemeService.OnChange -= OnThemeChanged;
    }
}
