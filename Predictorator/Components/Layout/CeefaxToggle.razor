@implements IDisposable
@rendermode InteractiveServer
@inject ThemeService ThemeService

<MudIconButton Icon="@Icons.Material.Outlined.Article"
              OnClick="ToggleCeefax"
              Color="@(ThemeService.IsCeefax ? Color.Inherit : Color.Dark)"
              UserAttributes="@(new Dictionary<string, object>{{"id","ceefaxToggle"}})" />

@code {
    protected override void OnInitialized()
    {
        ThemeService.OnChange += OnThemeChanged;
    }

    private async Task ToggleCeefax()
    {
        await ThemeService.ToggleCeefaxAsync();
    }

    private void OnThemeChanged() => InvokeAsync(StateHasChanged);

    public void Dispose()
    {
        ThemeService.OnChange -= OnThemeChanged;
    }
}
