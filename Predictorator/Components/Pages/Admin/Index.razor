@page "/admin"
@rendermode InteractiveServer
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize(Roles="Admin")]
@inject AdminService AdminService
@inject ToastInterop Toast

<MudPaper Class="pa-2 mb-4">
    <MudButton Color="Color.Error" OnClick="ClearCaches">Clear Caches</MudButton>
</MudPaper>

<MudTabs>
    <MudTabPanel Text="Subscribers">
        <Subscribers />
    </MudTabPanel>
    <MudTabPanel Text="Game Weeks">
        <GameWeeks />
    </MudTabPanel>
</MudTabs>

@code {
    private async Task ClearCaches()
    {
        await AdminService.ClearCachesAsync();
        await Toast.ShowToast("Caches cleared!", "success");
    }
}
